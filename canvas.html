<style>*{margin:0;padding:0}canvas,button,img{display:block;border:solid;margin:1rem auto 0}canvas{cursor:crosshair;border:solid}button{font-size:200%;cursor:pointer;padding:0 1rem}</style><button>导出为GIF</button><canvas></canvas><img><script src=https://cdn.bootcdn.net/ajax/libs/gif.js/0.2.0/gif.js></script><script>window.onload=(()=>{const e=new GIF({workers:20,quality:1}),t=document.querySelector("canvas"),o=t.getContext("2d");t.width=window.innerWidth-100,t.height=window.innerHeight-100,o.fillStyle="white",o.fillRect(0,0,t.width,t.height),o.lineWidth=5,o.strokeStyle="black",t.onmousedown=(n=>{o.beginPath(),o.moveTo(n.offsetX,n.offsetY);const i=setInterval(()=>{let o=new Image;o.src=t.toDataURL("image/png"),o.onload=(()=>{e.addFrame(o,{delay:100})})},100);t.onmousemove=(e=>{o.lineTo(e.offsetX,e.offsetY),o.stroke()}),document.onmouseup=(()=>{t.onmousemove=null,setTimeout(()=>{clearInterval(i)},100)})}),document.querySelector("button").onclick=(()=>{e.on("finished",e=>{let t=document.createElement("a");t.href=document.querySelector("img").src=URL.createObjectURL(e),t.download="gif.gif",t.click()}),e.render()})});</script>